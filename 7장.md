#JpaMain
```java
package queryDSL;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

public class JpaMain {

    static EntityManagerFactory emf = Persistence.createEntityManagerFactory("jpa");

    static void save(EntityManager em) {
        Member member1 = new Member();
        member1.setId("member1");
        member1.setUsername("회원1");
        em.persist(member1);

        Product productA = new Product();
        productA.setId("productA");
        productA.setName("상품A");
        em.persist(productA);

        Orders orders = new Orders();
        orders.setMember(member1);
        orders.setProduct(productA);
        orders.setOrderAmount(2);
        em.persist(orders);
    }

    public static void main(String[] args) {
        EntityManager em = emf.createEntityManager();
        EntityTransaction transaction = em.getTransaction();

        transaction.begin();
        save(em);
        transaction.commit();

        emf.close();
    }
}

```

#Member
```java
package queryDSL;

import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import java.util.ArrayList;
import java.util.List;

@Entity
@NoArgsConstructor
@Getter
@Setter
public class Member {

    @Id
    @Column(name = "MEMBER_ID")
    private String id;

    private String username;

    @OneToMany(mappedBy = "member")
    private List<Orders> orders = new ArrayList<>();

//    @ManyToMany
//    /**
//     관계형 데이터베이스는 2개의 테이블로 다대다 관계를 표현할 수 없으므로
//     일대다 다대일 관계로 풀어내는 연결 테이블을 사용
//     */
//    @JoinTable(
//            name = "MEMBER_PRODUCT", //연결할 테이블 명
//            joinColumns = @JoinColumn(name = "MEMBER_ID"), //Member 엔티티와 @Id와 매핑할 조인 컬럼 정보
//            inverseJoinColumns = @JoinColumn(name = "PRODUCT_ID") //Product 엔티티와 @Id와 매핑할 조인 컬럼 정보
//    )

//    //복합키를 사용하는 다대다 연관관계
//    @OneToMany(mappedBy = "member")
//    private List<MemberProduct> memberProducts;

//    //주 테이블에 외래 키가 있는 단방향 관계
//    @Id @GeneratedValue
//    @Column(name = "MEMBER_ID")
//    private Long id;
//
//    private String username;
//
//    @OneToOne
//    @JoinColumn(name = "LOCKER_ID")
//    private Locker locker;

//    //일대다 단방향 양방향
//    @Id @GeneratedValue
//    @Column(name = "MEMBER_ID")
//    private Long id;
//
//    private String username;
//
//    /**
//        다대일 단방향 매핑 (읽기전용)
//        이렇게 사용하면 양쪽에서 외래키를 관리하여 문제가 발생할 수 있으므로
//        등록, 수정을 false로 설정하여 읽기만 가능하게
//     */
//    @ManyToOne
//    @JoinColumn(name = "TEAM_ID", insertable = false, updatable = false)
//    private Team team;

//    //다대일 단방향 양방향
//    @Id
//    @GeneratedValue(strategy = GenerationType.AUTO)
//    @Column(name = "MEMBER_ID")
//    private Long id;
//
//    @Column(name = "USERNAME")
//    private String username;
//
//    @ManyToOne
//    @JoinColumn(name = "TEAM_ID")
//    private Team team;
//
//    public void setTeam(Team team) {
//        this.team = team;
//
//        //getMembers 안에 본인이 없는 경우에 추가
//        if(!team.getMembers().contains(this))
//            team.getMembers().add(this);
//    }
}

```

#Orders
```java
package queryDSL;

import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

import javax.persistence.*;

@Entity
@NoArgsConstructor
@Getter
@Setter
/**
    Order : 오라클의 예약어로서 사용할 경우 expected Identifier 에러 발생
    사용하려는 엔티티가 특정 DB의 예약어 같다 싶으면 조회해보자.. 나의 1시간이여
 */
public class Orders {

    @Id
    @GeneratedValue
    @Column(name = "ORDERS_ID")
    private Long id;

    @ManyToOne
    @JoinColumn(name = "MEMBER_ID")
    private Member member;

    @ManyToOne
    @JoinColumn(name = "PRODUCT_ID")
    private Product product;

    private int orderAmount;

}

```

#Product
```java
package queryDSL;

import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
@NoArgsConstructor
@Getter
@Setter
public class Product {

    @Id
    @Column(name = "PRODUCT_ID")
    private String id;

    private String name;



    /**
        다대다 관계를 사용하기 위한 조건으로는 주 엔티티 키, 반대 엔티티 키 컬럼 2개만 가지고있는 테이블을 사용해야하는데
        실무에서 사용할 때 키만 가지는 테이블보다는 변경날짜, 변경자 등 의 필드를 요구하므로 실무에서 사용하기 어렵다

        상품 엔티티에서 회원상품 엔티티로 객체 그래프 탐색이 불필요하여 주석처리
     */
//    @ManyToMany(mappedBy = "products")
//    private List<Member> members = new ArrayList<>();

}

```